package java_string.input_stream.that;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;

public class Main {

    public static void main(String[] args) {
        byte[] bytes;
        ByteArrayInputStream bis;
        ReplacingInputStream ris;
        ByteArrayOutputStream bos;
        try {
//            bytes = "hello xyz world.".getBytes("UTF-8");
            bytes = "{\"type\":\"print_preview\",\"content\":[{\"type\":\"template\",\"attrs\":{\"name\":\"linh xslfo\"},\"content\":[{\"type\":\"doc\",\"attrs\":{\"layout\":\"document\",\"fontFamily\":\"Arial\",\"counterMode\":\"short\",\"counterTop\":4,\"counterContent\":\"\",\"fontSize\":11,\"counterLeft\":171,\"direction\":\"ltr\"},\"content\":[{\"type\":\"page\",\"attrs\":{\"margin\":\"auto\",\"orientation\":\"portrait\",\"rectoVerso\":0,\"outputBin\":\"0\",\"precedence\":false,\"indentBottom\":10,\"indentRight\":20,\"chartGraphic\":\"linh test 2\",\"indentTop\":10,\"width\":210,\"indentLeft\":20,\"direction\":\"ltr\",\"height\":297},\"content\":[{\"type\":\"start\",\"attrs\":{\"backgroundColor\":\"#FFFFFF\",\"width\":0,\"backgroundPosition\":\"Top left\",\"backgroundRepeat\":\"no-repeat\"},\"content\":[]},{\"type\":\"header\",\"attrs\":{\"detached\":false,\"backgroundColor\":\"#FFFFFF\",\"backgroundPosition\":\"Top left\",\"backgroundRepeat\":\"no-repeat\",\"height\":20},\"content\":[{\"type\":\"imx_paragraph\",\"attrs\":{\"variableOptional\":false,\"name\":\"header logo\",\"nested\":true}}]},{\"type\":\"body\",\"attrs\":{\"indentRight\":5,\"backgroundColor\":\"#FFFFFF\",\"columnGap\":0,\"indentTop\":5,\"backgroundPosition\":\"Top left\",\"backgroundRepeat\":\"no-repeat\",\"indentLeft\":5,\"indentBottom\":5},\"content\":[{\"type\":\"imx_paragraph\",\"attrs\":{\"variableOptional\":false,\"name\":\"linhtest con para 23072024\",\"nested\":true}}]},{\"type\":\"footer\",\"attrs\":{\"detached\":false,\"backgroundColor\":\"#FFFFFF\",\"backgroundPosition\":\"Top left\",\"backgroundRepeat\":\"no-repeat\",\"height\":20},\"content\":[]},{\"type\":\"end\",\"attrs\":{\"backgroundColor\":\"#FFFFFF\",\"width\":0,\"backgroundPosition\":\"Top left\",\"backgroundRepeat\":\"no-repeat\"},\"content\":[]}]}]}]},{\"type\":\"imx_paragraphs\",\"content\":[{\"type\":\"imx_paragraph\",\"attrs\":{\"name\":\"header logo\"},\"content\":[{\"type\":\"paragraph\",\"attrs\":{\"variableType\":\"normal\",\"indentRight\":0,\"paddingBottom\":0,\"pageBreak\":false,\"editable\":true,\"id\":\"620d5a82-b1ed-4c9f-a495-7c748183af62-487107196357\",\"paddingTop\":0,\"borderStyle\":\"none\",\"lineSpacing\":1,\"indentLeft\":0,\"direction\":\"ltr\"},\"content\":[]},{\"type\":\"table\",\"attrs\":{\"marginRight\":0,\"editable\":true,\"id\":\"039a9ed6-b31b-4c3b-8525-4cfef69044d4-487107196357\",\"align\":\"left\",\"tableMap\":[180],\"marginLeft\":0},\"content\":[{\"type\":\"table_row\",\"attrs\":{\"variableType\":\"normal\",\"conditional\":false,\"pageBreak\":false,\"repeatable\":false,\"removable\":false,\"id\":\"24d955f8-c014-47ee-b486-5f620f8b4152\"},\"content\":[{\"type\":\"table_cell\",\"attrs\":{\"colspan\":1,\"borderColor\":\"#abe773\",\"columnNumber\":null,\"background\":\"#abe773\",\"borderWidth\":\"1.0px\",\"rowspan\":1,\"paddingRight\":0,\"colwidth\":[180],\"id\":\"fd105084-81d3-4787-b1ea-d367cd951640\",\"borderStyle\":\"solid solid solid solid\",\"class\":\"sc-codix-stylus ProseMirror-table-cell\",\"paddingLeft\":0},\"content\":[{\"type\":\"paragraph\",\"attrs\":{\"variableType\":\"normal\",\"indentRight\":0,\"paddingBottom\":0,\"pageBreak\":false,\"editable\":true,\"id\":\"1a196fbb-bd11-40ca-b41f-def51b58f551\",\"paddingTop\":0,\"borderStyle\":\"none\",\"align\":\"center\",\"lineSpacing\":1,\"indentLeft\":0,\"direction\":\"ltr\"},\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"mark-font-size\",\"attrs\":{\"pt\":\"30.0\"}},{\"type\":\"mark-text-color\",\"attrs\":{\"color\":\"#ffffff\"}},{\"type\":\"font-family\",\"attrs\":{\"name\":\"Arial\"}}],\"text\":\"Cetelem\"}]}]}]},{\"type\":\"table_row\",\"attrs\":{\"variableType\":\"normal\",\"conditional\":false,\"pageBreak\":false,\"repeatable\":false,\"removable\":false,\"id\":\"ab960404-fe51-4e47-a103-30c407d92278\"},\"content\":[{\"type\":\"table_cell\",\"attrs\":{\"colspan\":1,\"borderColor\":\"#ffffff\",\"columnNumber\":null,\"borderWidth\":\"1.0px\",\"rowspan\":1,\"paddingRight\":0,\"colwidth\":[180],\"id\":\"f6c6456c-6ae1-4860-bdde-2e949f51df8a\",\"borderStyle\":\"solid solid solid solid\",\"class\":\"sc-codix-stylus ProseMirror-table-cell\",\"paddingLeft\":0},\"content\":[{\"type\":\"paragraph\",\"attrs\":{\"variableType\":\"normal\",\"indentRight\":0,\"paddingBottom\":0,\"pageBreak\":false,\"editable\":true,\"id\":\"570e6636-499d-448e-810c-60bf2d36d949\",\"paddingTop\":0,\"borderStyle\":\"none\",\"align\":\"right\",\"lineSpacing\":1,\"indentLeft\":0,\"direction\":\"ltr\"},\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"strong\"},{\"type\":\"mark-font-size\",\"attrs\":{\"pt\":\"9.0\"}},{\"type\":\"font-family\",\"attrs\":{\"name\":\"default\"}}],\"text\":\"GRUPO BNP PARIBAS\"}]}]}]}]},{\"type\":\"paragraph\",\"attrs\":{\"variableType\":\"normal\",\"indentRight\":0,\"paddingBottom\":0,\"pageBreak\":false,\"editable\":true,\"id\":\"6c247f00-3d97-4123-8c0d-0f41a26306b1-487107196357\",\"paddingTop\":0,\"borderStyle\":\"none\",\"lineSpacing\":1,\"indentLeft\":0,\"direction\":\"ltr\"},\"content\":[]}]},{\"type\":\"imx_paragraph\",\"attrs\":{\"name\":\"linhtest con para 23072024\"},\"content\":[{\"type\":\"paragraph\",\"attrs\":{\"variableType\":\"normal\",\"indentRight\":0,\"paddingBottom\":0,\"pageBreak\":false,\"editable\":true,\"id\":\"917a9797-d0ab-4f2e-924c-41eb2d11389f-293901076307\",\"paddingTop\":0,\"borderStyle\":\"none none none none\",\"lineSpacing\":1,\"indentLeft\":0,\"direction\":\"ltr\"},\"content\":[]},{\"type\":\"paragraph\",\"attrs\":{\"variableType\":\"normal\",\"indentRight\":0,\"paddingBottom\":0,\"pageBreak\":false,\"editable\":true,\"id\":\"4d54b4cc-4129-49b6-88bf-b8dca4af6525-293901076307\",\"paddingTop\":0,\"borderStyle\":\"none none none none\",\"lineSpacing\":1,\"indentLeft\":0,\"direction\":\"ltr\"},\"content\":[{\"type\":\"image\",\"attrs\":{\"src\":\"/liteca-be-LITECA-582/api/images/47.gif\",\"resized\":false,\"alt\":\"badPic_47 - 47.gif\",\"align\":\"inline\",\"title\":\"badPic_47 - 47.gif\"}}]},{\"type\":\"paragraph\",\"attrs\":{\"variableType\":\"normal\",\"indentRight\":0,\"paddingBottom\":0,\"pageBreak\":false,\"editable\":true,\"id\":\"7c7a52d0-33bd-4d28-8a44-2e43b5cf2ff0-293901076307\",\"paddingTop\":0,\"borderStyle\":\"none none none none\",\"lineSpacing\":1,\"indentLeft\":0,\"direction\":\"ltr\"},\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"font-family\",\"attrs\":{\"name\":\"default\"}}],\"text\":\"text test\"}]}]}]}]}".getBytes("UTF-8");
            bis = new ByteArrayInputStream(bytes);

//            ris = new ReplacingInputStream(bis, "/liteca-be-LITECA-582/api/images/", "");
            ris = new ReplacingInputStream(bis, "/liteca-be-LITECA-582/api/images/", "");
            bos = new ByteArrayOutputStream();

            int b;
            while (-1 != (b = ris.read()))
                bos.write(b);

//            assertEquals("hello  world.", bos.toString());
            System.out.println(bos.toString());

        }catch (Exception e){
            e.printStackTrace();
        }
    }
}
